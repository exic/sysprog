test: $(OBJS)
	[ -d tests ] && cd tests && make || true

clean:
	find -name '*.o' -or -name '*.a' -or -name 'test-exec' | xargs rm -f
	rm -f $(EXE) $(OBJS) $(OUT) $(OUTLIB)
	[ -d tests ] && ( cd tests && make clean ) || true

%.o: %.cpp
	echo CC $<
	${CXX} -c ${CXXFLAGS} $<

$(OUTLIB): $(OBJS)
	$(AR) $(ARFLAGS) rv $(OUTLIB) $?
	$(RANLIB) $(OUTLIB)

# vim: set filetype=make : #
